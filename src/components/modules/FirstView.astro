---
import Picture from '@components/util/ImgComponent_01.astro';
import { Image } from 'astro:assets';
import Logo from '@images/logo-briefing_01.svg';
// import Img_1 from '@images/img_01.jpg';
// import Img_1Sp from '@images/img_01_sp.jpg';
---

<h1 class="siteTtl">
  <a href="#g-wrapper">
    <Image src={Logo} alt="BRIEFING" width={314} densities={[1, 2, 3]} loading="eager" />
  </a>
</h1>
<!-- /.siteTtl -->

<div class="mainSection g-mainSection js-toggleClass" id="firstView">
  <div class="scene">
    <div class="inner">
      <div class="bgImg" id="kvVideo">
        <video muted playsinline loop preload="none" class="kvVideo">
          <source src="video/fv.mp4" type="video/mp4" />
        </video>
      </div>
      <!-- /.bgImg -->
    </div>
    <!-- /.inner -->
  </div>
  <!-- /.scene -->
</div>
<!-- /.mainSection -->

<style lang="scss">
  @use 'sass:math';
  @use 'src/styles/global' as *;
  @use 'src/styles/utils' as *;
  ////////////////////
  .mainSection {
    background-color: $black;
  }
  ////////////////////
  .bgImg {
    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      :global(.loaded) & {
        animation: baseFade_01 0.4s 0.4s forwards;
      }
    }
    :global(.fixedHeader) & {
      opacity: 0;
    }
  }
  ////////////////////
  // @media screen and (min-height: $breakH + 1px) {
  .scene {
    height: 100vh;
  }
  // }
  ////////////////////
  .content {
    align-items: center;
    justify-content: center;
  }
  ////////////////////
  .siteTtl {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100dvh;
    pointer-events: none;
    z-index: 2000;
    opacity: 0;
    :global(.loaded) & {
      animation: baseFade_01 0.4s forwards;
    }
    :global(.menuOpen) & {
      opacity: 0;
    }
    @media screen and (max-width: $break-point-middle-sp) {
      a {
        pointer-events: all;
        position: absolute;
        display: flex;
        width: get_sp(254);
        left: calc(50% - get_sp(127));
        top: calc(50% - get_sp(17));
        transition: 0.4s $ease-out-quad;
        :global(.setLogoTop) & {
          width: get_sp(132);
          left: calc(50% - get_sp(66));
          top: get_sp(30);
        }
      }
    }
    img {
      @include imgset;
    }
  }
  @media screen and (min-width: $break-point-middle) {
    .siteTtl {
      display: flex;
      align-items: center;
      justify-content: center;
      a {
        @include vwpxpc2(width, 314);
        min-width: 314px;
        :global(.setLogoTop) & {
          opacity: 0;
        }
      }
    }
  }
  ////////////////////
  @media screen and (min-width: $break-point-middle) {
  }
</style>

<script>
  // 768px以下なら動画ソースを切り替え
  setKv();
  function setKv() {
    var videoWrap = document.getElementById('kvVideo');
    if (!videoWrap) return;
    var video = videoWrap.querySelector('video');
    if (!video) return;
    var source = video.querySelector('source');
    if (!source) return;
    if (window.innerWidth <= 768) {
      source.src = 'video/fv_sp.mp4';
      video.load();
    }
    video.play();
  }
</script>
